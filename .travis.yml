#
# Copyright (c) 2017 Dell Inc., or its subsidiaries. All Rights Reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
language: java
install: true
jdk:
  - oraclejdk8
env:
  global:
    - GRADLE_OPTS="-Xms128m"
    - ORG_GRADLE_PROJECT_logOutput=true
    - secure: "Gsyetih5FgHl9irSYNsIYapV2H6OjqvJ4vEfyfJKgBY8aobbU3x3Rl+R0HlMI4je89V1d65pp3xSvXmZ5X+eipfwpfAg+nIvJCaDhu95ymqd0HxnPbpFcY6JhaTkku49Ffbt6y26nRfyj9HafOqvP4WZ7DZRzcO4DVilv+Va61B/e0riACB0S2WLwPwixif1ThIUH79bsf5xZ/iJVcMw+CQV7x8eZetbVwX0ptG7I7nbOCHPB0TPTOEBwnUKjnXoC63x0bpOBD47q3r3VdkkbgeR02b/QxXtVTr8P1fQy4rUDGvr9uM4QtEhe4yHay5o0AH7G/fs10JkHLF1K1IF1DPph72F27svEXRhoBLNm8ogJ1c5nOvbrcgg2kHAP0AATJ3/4fatbuABJ0ps6vpmsM0KImshwmj/hHoxNUfwdoBP44WdjLPSG2IvOHu5QzhcEzMMdBLd51GCbkvng2LtjSBpFDsvtJ2pFocGhltIIVZv1eoiQdPn9IumW1nPePhNOLYVOHSHPHEZSdDG7rCMuTH3efcRwJbtbBiUWxzeaLZAQYWCb/zHnMuWNS0V2OFHpIQs+2OzuY93sq7OLLHNSG9pmoI8swGx0NMvd9Y+6ZUg91hobypKagJSJAAmpxIWbKKwg1ezI63xh14kVrn8ptdXDc0hkbcriu6k694R13c="
    - secure: "KebuOFCj2cGsh0JCsMXlnOYwqUcbgnIjXFXOfFVWNuk3rMj+bydZRFISljy7kHFjmi3+KWg+lq6Oys+V/xRUwOyOpCrDrV9TkFue6Q90yiFjVXHsFWcZLfhBQ8+oi09Knxtl67BxgElV8/ezVP/6Z8aIrQxHrG3eZ6Xs6JzmbticSB+Nths/urPLDTnuFk7TSqjBi7MiuWXSbObO5bPdUn+3wyzGVn220kVqHgqloEoOQC0uzQCigbJLGXvEeSIarM5MLiNsx2V5/KR0hwL7KF1MIwC1nwqgalkkH++aKm596LVy62+/ML+Va2npsdEdnKaxL7jbuZk/9JZDdmvTzIIofVfcGvr7YxAI9f7jrUtR6uCaymZKp/bnMEBQfgWZh2ll85P3br1O4oPuJJRSADqFsfla6SFdPr8vZBFijyPsF6MQXHPo4bIL28TNbJRUqzZYRdjhsQFhPoJC7bazv1ApU87pKlUdKkjAYBFUMHpoBcaJx8+HgGgsWUToZEvNioiJMgP7nCnAZGmlcYv0b5HJW9r8s9dAYgmZWrtJYp9CUrBji+Zw8Oh5oroUIrWTULed0uEmbs/VQvMsJMN6qzd+96OtjQ1tCFTKiwXA4zEXBhMQU/R1MnE7dVRLxuW4l/BNDq3SxiX9aDNYm75YsK6rtg13i0SrB/WtoX0IXL0="

sudo: required

services:
  - docker

cache:
  directories:
  - .gradle
  - $HOME/.gradle
  - $HOME/.m2

stages:
  - name: build
  - name: snapshot
    if: branch = issue-119

jobs:
  include:
    - stage: build
      script: ./gradlew clean assemble
    - stage: snapshot
      script: ./gradlew clean assemble publishToRepo -PpublishUrl=jcenterSnapshot

notifications:
  slack:
    matrix:
      secure: Gv0RJx1Sa/y5fmvLNwY+2ivfWZYCM0ekrr6UAHqsegnid6P/DFZrSrfSpwvcVh2OVNH8DHLV0BoiuDJ7amtl1eMDMXz5/lLz8tFWFKaHv4yDSadm8ILY/KnYUoP4IRuM3NyKQmBrmZB9Or5KFXboG6ex6UkgbuYy0Zyl6syEe168Iw8hlCRx26Jei7/y+8eE2MIGFh09TLRZ/944YbULum9H3KQLYv8nFdPc7GmR5AK461fnwZ7iYjb7MXkCctE5Vml3p9+2Qliv1ZJqNsQeKmSFW6IhiP6pNZ1V8VJEWMQmX/nBr9745l/N+CoLQz9ajLonlxn9xHdWms4TEu1ynFk6uxEJjlcpXcvcEaKhqAKcTMl0GMMRab2m+/Vt3S/VutJnVXQmnhZGT9glLFQHwcdHNqM/LEbXtyisB7zmGImUQpF2InCwO25IXug5gv64IfOHGMzL56yNIhbRgBY9Ud4Tux+pmkV5ZxJiBkul7/FiHQX7tQLUrzQosD0oyCOmaWD7kmbt15A0TOkLgup4HE+sSS1ASwisa7J2+HsbI3Upy3rNVKuIJP0L4KSTn4HSlDlMLLcWM+nz/YCEfuwSRXJTIstotNYHdsLUZAZSYAX7ejpeiuBRed4a4AlCROeKbKKwCcSvqCOjmCaPTpwJAGeJByOXLL2hfQzpDMKCIKM=
    rooms:
      secure: Gv0RJx1Sa/y5fmvLNwY+2ivfWZYCM0ekrr6UAHqsegnid6P/DFZrSrfSpwvcVh2OVNH8DHLV0BoiuDJ7amtl1eMDMXz5/lLz8tFWFKaHv4yDSadm8ILY/KnYUoP4IRuM3NyKQmBrmZB9Or5KFXboG6ex6UkgbuYy0Zyl6syEe168Iw8hlCRx26Jei7/y+8eE2MIGFh09TLRZ/944YbULum9H3KQLYv8nFdPc7GmR5AK461fnwZ7iYjb7MXkCctE5Vml3p9+2Qliv1ZJqNsQeKmSFW6IhiP6pNZ1V8VJEWMQmX/nBr9745l/N+CoLQz9ajLonlxn9xHdWms4TEu1ynFk6uxEJjlcpXcvcEaKhqAKcTMl0GMMRab2m+/Vt3S/VutJnVXQmnhZGT9glLFQHwcdHNqM/LEbXtyisB7zmGImUQpF2InCwO25IXug5gv64IfOHGMzL56yNIhbRgBY9Ud4Tux+pmkV5ZxJiBkul7/FiHQX7tQLUrzQosD0oyCOmaWD7kmbt15A0TOkLgup4HE+sSS1ASwisa7J2+HsbI3Upy3rNVKuIJP0L4KSTn4HSlDlMLLcWM+nz/YCEfuwSRXJTIstotNYHdsLUZAZSYAX7ejpeiuBRed4a4AlCROeKbKKwCcSvqCOjmCaPTpwJAGeJByOXLL2hfQzpDMKCIKM=
  email:
    - tom.kaitchuck@dell.com
    - bhargav.gulavani@dell.com
    - Flavio.Junqueira@emc.com
