#
# Copyright (c) 2017 Dell Inc., or its subsidiaries. All Rights Reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
language: java
install: true
jdk:
  - oraclejdk8
env:
  global:
    - GRADLE_OPTS="-Xms128m"
    - ORG_GRADLE_PROJECT_logOutput=true
    - secure: "GKRgf9obRGhuBgKv8nB4uiDtJCBoegf2L7AmBxj0MlsE5Giq4cCVsudY6wYnFDFDurzReqV9VXVw7+KrIg01JctS81ehoh9mj9QCrSLtnNJi0T0LaDeN2hAG6wUVm6Zz62Nx3+nkAavHaKlb2cF5yXnu8sa02wB+wJwCF/W1DnT/+GK2eNNuCVLLlWRiW5h07E9Z+GVZPpO0VoK1NNWCFmSPw/ZVQ0uXJ8G0bmkkShfBexb9BP7q5l0h8N3DPR7OUXayIegCz1ae0+xgeR6WYz7J69y3IkJiRcbSwxi1+HhmBP2DLrQmY3y2YH4yOW/gTIMedE4Ld+NM7XtvsTxUyoCd2kzOPjhKEbUP4zw+PpeJuq/LzGTFxTXWgydEN4XkLPMppLlyQmwohR9RnUoqYB7ivAGY06EVMRIWi9Le8I+3mcG1oBvYUFSGCp+F4cr3IuCvEefaeOxgKY/YnHlpIrJH218sbztoCU0qjkwDBHKIsrCh9rJ2qmXyC1qib4pmJg3Y5YKdOMzdIyr52gXaa4mR6DKdDPd0eDJHMXK5BhbKXM9eEv39bVLpRWwuzDIrx3otC+56MPAiGjPPRtQt0WzOdrVk/vuuTzR2aSoPBCkQDsSPYBMmiOZs9Q1rzIIfLcFUD+WKoicIfwNjRWFofCybGiY/9WI7+mUC+xD85u0="
    - secure: "ZgpRG2QcGUXuxT9WTOHSnYJ5HGy4FlTut483IodmlrODViWgZMad2cFUKwgEqbzwdEFRwQBL2BT4DmDIG75lBVMds9c5CNxjXhtvbIkQKKyn7U/haqosUziXVMGRz6Z8mjucEe8+O8NdeTfOMlSIvQOpUegBvmZGXcNAl+1a9l8luf4LDQ5+JGTW5M/PUn5WL4GloZ7oy3PTeQRKcmivdqgN22V8NB4/mZj6INLE1+rUKFWz9BwIN4SN32T3N/2XaCUmYJGv3kyURKgvZyrPa6UUydzfdC2hJCuPF2NBe1UFcnhhfbB7VqEJw/5NekEoCew36bNqrwu+bFOtcxpx/pbRtS5I8ar2MuX9kmVsHuNrrYsjXRI8BpPMuskJRDG84KnlWcZ8WQlCWNn3+D8p0XHLZ9Rg6RsjF8zNyCR6HejekoVMY874gy5Y6nKJUBROiSFlBLp62emOaS4KvK7Atq+1jg9/Z62CIxuZ+PYbHRVBttGEu2L5rQ+HTvgR5jUVZ4Hsge4ifvYpzOJYl6eVdeaLJWSOjn/iM2vfdp7axMQOyXKNJnaaELimvidbdsgZSYGAdVBdsSCG+3cMcRE3+OJhG8XsfuGbGGA50W8WP/R5RsllukUGRzP48hBi99XutYyGBx7iwKUAqSSWNe62KrvmwA8VhWokdsuZvx1guBs="

sudo: required

services:
  - docker

cache:
  directories:
  - .gradle
  - $HOME/.gradle
  - $HOME/.m2

stages:
  - name: build
  - name: snapshot
    if: branch = issue-119

jobs:
  include:
    - stage: build
      script: ./gradlew clean assemble
    - stage: snapshot
      script: ./gradlew clean assemble publishToRepo -PpublishUrl=jcenterSnapshot

notifications:
  slack:
    matrix:
      secure: Gv0RJx1Sa/y5fmvLNwY+2ivfWZYCM0ekrr6UAHqsegnid6P/DFZrSrfSpwvcVh2OVNH8DHLV0BoiuDJ7amtl1eMDMXz5/lLz8tFWFKaHv4yDSadm8ILY/KnYUoP4IRuM3NyKQmBrmZB9Or5KFXboG6ex6UkgbuYy0Zyl6syEe168Iw8hlCRx26Jei7/y+8eE2MIGFh09TLRZ/944YbULum9H3KQLYv8nFdPc7GmR5AK461fnwZ7iYjb7MXkCctE5Vml3p9+2Qliv1ZJqNsQeKmSFW6IhiP6pNZ1V8VJEWMQmX/nBr9745l/N+CoLQz9ajLonlxn9xHdWms4TEu1ynFk6uxEJjlcpXcvcEaKhqAKcTMl0GMMRab2m+/Vt3S/VutJnVXQmnhZGT9glLFQHwcdHNqM/LEbXtyisB7zmGImUQpF2InCwO25IXug5gv64IfOHGMzL56yNIhbRgBY9Ud4Tux+pmkV5ZxJiBkul7/FiHQX7tQLUrzQosD0oyCOmaWD7kmbt15A0TOkLgup4HE+sSS1ASwisa7J2+HsbI3Upy3rNVKuIJP0L4KSTn4HSlDlMLLcWM+nz/YCEfuwSRXJTIstotNYHdsLUZAZSYAX7ejpeiuBRed4a4AlCROeKbKKwCcSvqCOjmCaPTpwJAGeJByOXLL2hfQzpDMKCIKM=
    rooms:
      secure: Gv0RJx1Sa/y5fmvLNwY+2ivfWZYCM0ekrr6UAHqsegnid6P/DFZrSrfSpwvcVh2OVNH8DHLV0BoiuDJ7amtl1eMDMXz5/lLz8tFWFKaHv4yDSadm8ILY/KnYUoP4IRuM3NyKQmBrmZB9Or5KFXboG6ex6UkgbuYy0Zyl6syEe168Iw8hlCRx26Jei7/y+8eE2MIGFh09TLRZ/944YbULum9H3KQLYv8nFdPc7GmR5AK461fnwZ7iYjb7MXkCctE5Vml3p9+2Qliv1ZJqNsQeKmSFW6IhiP6pNZ1V8VJEWMQmX/nBr9745l/N+CoLQz9ajLonlxn9xHdWms4TEu1ynFk6uxEJjlcpXcvcEaKhqAKcTMl0GMMRab2m+/Vt3S/VutJnVXQmnhZGT9glLFQHwcdHNqM/LEbXtyisB7zmGImUQpF2InCwO25IXug5gv64IfOHGMzL56yNIhbRgBY9Ud4Tux+pmkV5ZxJiBkul7/FiHQX7tQLUrzQosD0oyCOmaWD7kmbt15A0TOkLgup4HE+sSS1ASwisa7J2+HsbI3Upy3rNVKuIJP0L4KSTn4HSlDlMLLcWM+nz/YCEfuwSRXJTIstotNYHdsLUZAZSYAX7ejpeiuBRed4a4AlCROeKbKKwCcSvqCOjmCaPTpwJAGeJByOXLL2hfQzpDMKCIKM=
  email:
    - tom.kaitchuck@dell.com
    - bhargav.gulavani@dell.com
    - Flavio.Junqueira@emc.com
